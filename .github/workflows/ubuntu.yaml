name: Test

on:
  push:
  pull_request:

jobs:
  cpp-linux-macos-windows:
    name: "C++ tests (Linux-MacOS-Windows/x64)"
    strategy:
      fail-fast: false
      matrix:
        # Building for {g++, clang++}/Linux, clang++/MacOS, and msvc/Windows
        # both in Debug and Release
        os: [ubuntu-latest, macos-latest, windows-latest]
        compiler: [g++, clang++, msvc]
        build_type: [Debug, Release]
        exclude:
          - os: ubuntu-latest
            compiler: msvc
          - os: macos-latest
            compiler: g++
          - os: macos-latest
            compiler: msvc
          - os: windows-latest
            compiler: g++
          - os: windows-latest
            compiler: clang++
    runs-on: ubuntu-latest
    steps:
      - name: Test configurations
        run: echo "os:" ${{ matrix.os }} ", compiler:" ${{ matrix.compiler }} ", build_type:" ${{ matrix.build_type }}
        shell: bash
